{% extends "base.html" %}

{% block body %}

<script>
    function delExpense(desc) {
        if (!window.confirm("Are you sure you want to delete Expense that has a description of:\n"+desc)) {
            return false
        }
    }
</script>

<style>

    .row {text-align: center;} 

    table, th, td {border: 1px solid black;}  

    .line {background-color:#00FEFE}
    .line2 {background-color:#ffc7b6}

    

</style>
{% if expenses%}
<br>
<br>
<span class = "line">Hello {{ name_user }}, these are your expenses:</span>
<br>
<br>
<table>
    <tr>
        <th>Type</th>
        <th>Description of the expense</th>
        <th>Date</th>
        <th>Amount (£)</th>
        <th>Action</th>
    </tr>
    {% for expense in expenses %}
    <tr class="row">
        <td>{{ expense.type }}</td>
        <td>{{ expense.description }}</td>
        <td>{{ expense.date_purchase }}</td>
        <td>{{ expense.amount }}</td>
        <td><a href="/mod_expense/{{expense.expense_id}}">Edit</a></td>
        <td>
            <form onsubmit="return delExpense('{{expense.description}}')" method='POST' action='/del_expense'>
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <input type="hidden" name="id" value="{{ expense.expense_id }}">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    
    {% endfor %}

    <p>Total Expended Amount (£): {{ total }}</p>

</table>

<p> Would you like to add a new expense?</p>

    <a href="/add_expense"> Add expenses</a>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/logout">Log Out</a>
{% else%}
<br>
<br>
<span class = "line2">Hello {{ name_user }}, would you like to start adding expenses?</span>
<br>
<br>
<a href="/add_expense"> Add expenses</a>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/logout">Log Out</a>

{% endif %}


{% endblock body %}
